#!/usr/bin/env boot

(defn today []
  (doto (java.util.Calendar/getInstance)
    (.setTimeZone (java.util.TimeZone/getTimeZone "UTC"))
    (.set java.util.Calendar/SECOND 0)
    (.set java.util.Calendar/MINUTE 0)
    (.set java.util.Calendar/HOUR_OF_DAY 0)))

(defn to-millis [mm dd yyyy]
  (.getTimeInMillis (doto (today)
                      (.set java.util.Calendar/DAY_OF_MONTH (Integer/parseInt dd 10))
                      (.set java.util.Calendar/MONTH (dec (Integer/parseInt mm 10)))
                      (.set java.util.Calendar/YEAR (Integer/parseInt yyyy 10)))))

(defn day-diff [left right]
  (.convert java.util.concurrent.TimeUnit/DAYS (- right left) java.util.concurrent.TimeUnit/MILLISECONDS))

; (def instructions "to-date mm dd yyyy
;                   prints how many days are left to the specified date")

(defn -main [& args]
  (let [[mm dd yyyy] args
        now (.getTimeInMillis (today))
        then (to-millis mm dd yyyy)]
    (println (day-diff now then))))

