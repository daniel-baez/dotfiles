#!/bin/sh

# Crea una nueva session de tmux llamada `Agenda` dentro de la cual `$PWD` es `$HOME/workspace`
# al iniciar la session, abre "el d√≠a de hoy" en vimwiki.
# En caso de existir tal session, se "atachea" a ella
# En caso de estar dentro de tmux, inicia vimwiki

# uso: agenda

# 
# tmux -A makes tmux attach to the session if already exists
# tmux new-session -c `directory` sets $PWD
# tmux new-session -s `session-name` sets session name
# tmux new-session -n `window-name` sets window name

readonly startVim="nvim -c 'VimwikiIndex' -c 'vsplit' -c 'VimwikiMakeDiaryNote'"

if [[ "$TMUX" ]]; then 
  eval $startVim
  exit 0
fi;

eval tmux -u new-session -A \
  -c $HOME/workspace \
  -s Agenda \
  -n Agenda \
  $startVim
